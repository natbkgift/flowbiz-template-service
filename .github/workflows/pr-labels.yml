name: PR Labels

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  suggest-labels:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Suggest persona labels
        run: |
          echo "üè∑Ô∏è Suggested labels based on changed files:"
          
          if git diff --name-only origin/main... | grep -E "(^apps/|^packages/)"; then
            echo "- persona:core (application code changes)"
          fi
          
          if git diff --name-only origin/main... | grep -E "(Dockerfile|docker-compose|nginx/)"; then
            echo "- persona:infra (infrastructure changes)"
          fi
          
          if git diff --name-only origin/main... | grep -E "(^docs/|README.md)"; then
            echo "- persona:docs (documentation changes)"
          fi
          
          echo ""
          echo "Please add appropriate persona labels to the PR"
